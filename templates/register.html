<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>注册</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link href="./static/css/mui.css" rel="stylesheet" />
	<script src="./static/js/mui.min.js"></script>
</head>

<body>
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		<h1 class="mui-title">注册</h1>
	</header>
	<div class="mui-content">
		<form class="mui-input-group">
			<div class="mui-input-row">
				<label>用户名</label>
				<input type="text" class="mui-input-clear" placeholder="请输入用户名" id="username">
			</div>
			<div class="mui-input-row">
				<label>密码</label>
				<input type="password" class="mui-input-password" placeholder="请输入密码" id="pwd">
			</div>
			<div class="mui-button-row">
				<button type="button" class="mui-btn mui-btn-primary" id="register">确认注册</button>
			</div>
		</form>
	</div>

	<script>
		        document.addEventListener('DOMContentLoaded', function() {
					document.getElementById('register').addEventListener('click', function() {
				console.log("first")

				var username = document.getElementById("username").value;
				var pwd = document.getElementById("pwd").value;
				mui.ajax('/register', {
					data: {
						username: username,
						pwd: pwd
					},
					dataType: 'json',
					type: 'post',
					success: function(data) {
						if (data.errorMessage == null) {
							mui.toast(data.message);
							mui.openWindow({url: '/'})
						} else {
							mui.toast(data.errorMessage);
						}
					},
					error: function(xhr, type, errorThrown) {
						// 处理错误情况
						console.log(type);
					}
				});
			})
				});
	</script>
</body>

</html>
